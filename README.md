# Git笔记

## Git安装

> Git安装,非常之简单,选择好安装路径,一路下一步即可

### 如何确定已经安装完成呢?

1. 命令行确定

```sh
# 通过 cmd(windows) 命令行操作, 也可以右键 选择 git bash here(linux) 输入命令
# 查看git的版本号
git --version
```



1. 右键查看,右键菜单
   - Git GUI Here `图形化界面工具,界面比较老`
   - ***Git Bash Here (Linux)***

## Git目录介绍

![目录介绍](./images/001.jpg)

## Git基本命令

> 右键,选择 **Git Bash Here** 选项, 在命令行中输入Git和Linux命令

### 1. 设置全局环境 **`[执行一次]`**

```sh
# 设置Git的用户名和邮箱地址,尽可能不要使用中文
# 设置全局用户名
git config --global user.name "用户名"

# 设置全局邮箱账号
# 现在学习期间,可以随意指定,但是入职后,该地址必须为真实能够接收到邮件的地址
git config --global user.email "xxx@xxx.xxx"

# 查看全局日志信息,按q退出
git config --list
```



### 2. 创建本地仓库

> 执行命令后,会创建一个 **.git** 隐藏文件夹,这就是我们的本地仓库

```sh
# 创建本地仓库,我们先创建一个空的文件夹,在该文件夹中执行命令
git init
```



### 3. 添加到暂存区

> 大家初次操作的时候,可以随意创建一个简单的文件,比如aaa.txt,然后对它进行管理
>
> 当你熟练的时候,我们在上Crm项目时,可以管理整个的项目

```sh
git add 文件名称
```



### 4. 查看文件状态

> - 文件状态的划分
>   - 红色 `没有添加到暂存区中的文件`
>   - 绿色 `已经添加到暂存区中的文件` `可以提交给本地仓库了`

```sh
git status
```



### 5. 提交到本地仓库

> 指定的日志信息,必须是有意义的,别随便写 **asdf** **qwer** **aaa** , 别这样随便写
>
> 你操作的是什么你就写什么就行了,中英文都可以
>
> 第一次提交时,会默认创建一个分支 **master** 分支

```sh
git commit -m "日志信息"
```



### 6. 版本切换

> 可以根据不同的提交的版本,然后我们进行切换
>
> 这也是,就好比我们打游戏的存放
>
> 如果上面不小心,删除错了文件,我们也可以通过这种方式还原

```sh
git reset --hard 版本唯一标识
```



### 7. 查看日志信息

> 可以查看每次提交的日志信息,简介信息,也有详细信息,里面标识了谁操作的,什么时间操作的,日志信息是什么

```sh
# 查看当前版本及以前的日志信息
git log
git log --oneline

# 查看历史日志信息
git reflog
```



### 8. 删除本地仓库中的文件

> 1. 删除文件(命令删除,按键删除)
> 2. 执行commit提交给本地仓库

```sh
# 可以通过Linux命令或删除按钮,删除文件
rm -rf 文件名称

# 此时该文件是红色的状态,我们需要将它变为绿色,添加到暂存区(已删除)
git add 文件名称

# 提交到本地仓库中(告知本地仓库我已删除该文件)
git commit -m "日志信息"

# 如果不小心删除错了,通过版本切换的命令,找回该文件
```



### 9. 文件比较

> 比较文件中的差异

```sh
# 比较本地仓库中的文件差异
# 比较工作目录和本地仓库的文件差异
git diff 文件名称

# 比较其他版本的文件和当前版本的本地仓库的文件差异
git diff 版本唯一标识 文件名称
```



## Git分支命令

> 多条线,同时进行,提高开发消息

### 1. 创建分支

> 创建出的新分支,它的代码和当前分支是一致的

```sh
git branch 分支名称
```



### 2. 查询本地分支

> 绿色标记的分支,代表当前所处的分支

```sh
git branch
```



### 3. 切换分支

```sh
git checkout 分支名称
```



### 4. 创建并切换分支

> 创建并切换分支 = 创建分支 + 切换分支

```sh
git checkout -b 分支名称
```



### 5. 删除分支

> 删除未修改的分支,可以直接删除
>
> 删除已修改的分支,必须强制删除
>
> 不能删除当前所在的分支,想要删除,需要切换到其他的分支再删除之前的分支

```sh
# 普通删除,删除未修改过的分支
git branch -d 分支名称
```



### 6. 合并分支

> 将目标分支的内容,合并到当前分支(git branch)上,是文件夹,文件,文件内容的合并

```sh
git merge 目标分支
```

- 如果两个分支或两个开发者,修改了同一个文件,相近的行数,就有可能导致冲突,必须手动进行解决
- 必须同时修改两个分支的内容

### 7. 解决冲突问题

> 冲突的产生是因为两个不同的分支都被修改,并且修改了相邻的几行,导致git不知道以谁为准,也可以理解为两个开发者在修改同一份文件的相邻几行,相互没有沟通,直接操作,导致冲突问题

```sh
# 冲突的内容 aaa.txt 文件
# 代表当前的分支内容
<<<<<<< HEAD
aaaaaaaa
bbbbbbbb
cccccccc
======= # 分隔符
# aaa分支的内容
rrrrrrrrr
eeeeeeeee
wwwwwwwww
>>>>>>> aaa
```

- 手动删除git的标记 `<<<<<< HEAD` `=======` `>>>>>>> aaa`
- 保留我们想要保留的内容
- 将该文件添加到暂存区,并提交到本地仓库中,即可解决该冲突

## Git远程命令

### 0. 注册远程账号

- Gitee `国内服务器,网络稳定`
  - [Gitee官网](https://gitee.com)
- Github `国外服务器,网络及不稳定,可以下载插件`
  - [Github官网](https://github.com)

### 1. 查看关联远程仓库

```sh
git remote -v
```



### 2. 关联远程仓库

> 本地仓库关联所需要的远程仓库
>
> https://gitee.com/lmx1989/yx2205.git
>
> 远程仓库是可以关联多个的

```sh
# 在本地仓库中关联远程仓库
git remote add 远程仓库关联名称 远程仓库地址
```



### 3. 删除远程仓库关联的关系

```sh
git remote remove 远程仓库关联名称
```



### 4. 推送代码

> 将本地仓库的分支推送到远程仓库中
>
> 第一次推送代码时,需要输入用户名和密码(远程仓库账号的)
>
> 如果不小心输入错误,去百度: 清理git凭证
>
> 再次推送输入用户名密码即可

```sh
git push 远程仓库关联名称 本地分支名称
```



### 5. 拉取代码

> 拉取代码是将远程仓库中的 **`分支`** 或 **`更新的代码`** 拉取到本地
>
> 1. 拉取本地仓库中没有的远程仓库分支
> 2. 更新本地仓库已有的分支代码

```sh
# 1. 拉取本地仓库中没有的远程仓库分支
git pull 远程仓库关联名称 远程的分支名称:本地的分支名称

# 2. 更新本地仓库已有的分支代码
git pull 远程仓库关联名称 远程的分支名称
```



### 6. 克隆代码

> 将默认或指定的远程分支代码克隆到本地
>
> 克隆下来的代码自动关联的远程仓库和`.git`隐藏目录

```sh
# 克隆远程仓库的默认分支
git clone 远程仓库地址

# 克隆远程的指定分支
git clone -b 远程分支名称 远程仓库地址
```



### 7. 删除远程仓库

> 除了远程仓库默认分支外,都可以通过该命令删除
>
> 如果想要删除远程仓库,可以在设置中进行删除

```sh
git push -d 远程仓库关联名称 远程分支名称
```



### 操作需要注意的问题

> 大家在操作的时候,要保证本地仓库的分支和远程仓库的分支是对应的,本地推送的就是一致
>
> 比如: 
>
> 远程分支: master (aaa.txt 内容不一致)
>
> 本地分支: master (aaa.txt 内容不一致)
>
> 我们在推送之前先拉取,拉取的时候提示拒绝合并无关的历史
>
> 就需要再拉取之前忽略版本问题

```sh
# 当两个同名的仓库,Git认为不是同源的仓库,那么我们需要先拉取
# 在拉取时,都会出现拒绝合并无关的历史的问题
git pull 远程仓库关联名称 远程分支名称 --allow-unrelated-histories
```

